<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <title>Upload</title>
</head>
<body>

    <div class="navbar">
        <a class="btn btn-primary" style="margin-left: 10%;">Home</a>
        <a class="btn btn-primary">Login</a>
        <a class="btn btn-primary" href="/upload">Upload</a>
        <a class="btn btn-primary" style="margin-right: 10%;">Logout</a>

    </div>

    <form id="form">

        <div class="justify-content-center d-flex">
            <div class="col-md-3" style="margin-top: 10%;">
                <input type="text" class="form-control title" placeholder="Title: ">

                <h6 class="mt-3">Choose a video: </h6>
                <input type="file" class="btn btn-primary mx-auto d-block" name="videos" id="video" accept=".mp4">

                
                <h6 class="mt-3">Choose a image for the video: </h6>
                <input type="file" class="btn btn-primary mx-auto d-block" name="images" id="image" accept=".png, .jpg, .jpeg">

            </div>


        </div>

        <div class="text-center mt-5">
            <button class="btn btn-primary" id="btn">Upload</button>

        </div>

    </form>


    <script>
        const form = document.getElementById("form")

        form.addEventListener("submit", (event) => {
            event.preventDefault()
            const formDataToSend = new FormData()
            const title = document.querySelector(".title").value
            const video = document.getElementById("video").files[0]
            const image = document.getElementById("image").files[0]

            formDataToSend.append("title", title)
            formDataToSend.append("files", video)
            formDataToSend.append("files", image)



            fetch("http://localhost:8000/upload", {
                method: "POST",
                body: formDataToSend

            })
            .then(response => response.json())
            .then(response => console.log(response))
            .catch(error => console.log(error))

        })



    </script>
      
      

</body>
</html>